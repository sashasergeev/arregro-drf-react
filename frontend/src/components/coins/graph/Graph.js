import React, { useEffect, lazy } from "react";
import Plot from "react-plotly.js";
import * as dayjs from "dayjs";
import { Box } from "@mui/material";
// import axios from "axios";

import useCommitsData from "./useCommitsData";

const Graph = () => {
  // get github activity
  const { isLoading, commitsData } = useCommitsData("fontcommunity");

  // date, price, volume
  // testcase - fontcommunity token
  const datePriceVolume = {
    stats: [
      [1614124800000, 4.683785772215054],
      [1614211200000, 4.683785772215054],
      [1614297600000, 4.403073788676017],
      [1614384000000, 2.9021047551449457],
      [1614470400000, 3.2146428602012165],
      [1614556800000, 3.779274447239128],
      [1614643200000, 5.806273442390919],
      [1614729600000, 8.539761111342424],
      [1614816000000, 7.559518158737503],
      [1614902400000, 8.536223955319956],
      [1614988800000, 33.79231668969752],
      [1615075200000, 23.25836543273522],
      [1615161600000, 15.78838705093702],
      [1615248000000, 18.879218334572684],
      [1615334400000, 20.275766840617123],
      [1615420800000, 14.885134055795865],
      [1615507200000, 12.21921479847648],
      [1615593600000, 16.373944902787624],
      [1615680000000, 20.656439032405405],
      [1615766400000, 23.249568807099173],
      [1615852800000, 20.862597008734348],
      [1615939200000, 15.915251124223142],
      [1616025600000, 14.242170453724116],
      [1616112000000, 20.217850949921164],
      [1616198400000, 18.30462752488079],
      [1616284800000, 17.80085210216324],
      [1616371200000, 17.142866771290308],
      [1616457600000, 17.17119575047078],
      [1616544000000, 17.14827754334258],
      [1616630400000, 12.728966989148532],
      [1616716800000, 13.150092761263789],
      [1616803200000, 14.296925897489105],
      [1616889600000, 24.677072306766046],
      [1616976000000, 23.789122690723765],
      [1617062400000, 18.409843275244857],
      [1617148800000, 20.479585809443574],
      [1617235200000, 20.096118143758613],
      [1617321600000, 24.139463117539204],
      [1617408000000, 33.51877417318143],
      [1617494400000, 27.146404868564947],
      [1617580800000, 28.40658191894464],
      [1617667200000, 19.59273902710011],
      [1617753600000, 17.556574129655726],
      [1617840000000, 21.369288900899097],
      [1617926400000, 18.648180162221365],
      [1618012800000, 15.67763335352425],
      [1618099200000, 17.3401641513195],
      [1618185600000, 17.444205984346276],
      [1618272000000, 16.94779573495544],
      [1618358400000, 15.97718302003194],
      [1618444800000, 16.812658334454575],
      [1618531200000, 16.04616448607332],
      [1618617600000, 15.573335492713694],
      [1618704000000, 14.518939955702239],
      [1618790400000, 14.173319396588907],
      [1618876800000, 11.247113351252594],
      [1618963200000, 14.51534997635547],
      [1619049600000, 12.768805379250166],
      [1619136000000, 11.099236303569931],
      [1619222400000, 10.635020027282746],
      [1619308800000, 8.06680657211156],
      [1619395200000, 8.39208772230867],
      [1619481600000, 8.840099138925687],
      [1619568000000, 8.861528854981326],
      [1619654400000, 7.294931929088107],
      [1619740800000, 6.326958690023049],
      [1619827200000, 6.5727641015680796],
      [1619913600000, 5.9154539039517955],
      [1620000000000, 5.928273604287634],
      [1620086400000, 16.67880880973802],
      [1620172800000, 9.65991467250569],
      [1620259200000, 9.41436764949129],
      [1620345600000, 8.574692361366903],
      [1620432000000, 10.0407399413538],
      [1620518400000, 11.412002332359396],
      [1620604800000, 10.544209902875616],
      [1620691200000, 12.446867582514201],
      [1620777600000, 14.453174081885338],
      [1620864000000, 12.361071783349077],
      [1620950400000, 9.578154938380909],
      [1621036800000, 10.192860497352713],
      [1621123200000, 7.672256915875679],
      [1621209600000, 7.073799703617943],
      [1621296000000, 5.785470082141652],
      [1621382400000, 5.601578855520374],
      [1621468800000, 4.039787562605732],
      [1621555200000, 3.6344190575847777],
      [1621641600000, 3.512837791520625],
      [1621728000000, 2.6392053950098457],
      [1621814400000, 2.423236740313933],
      [1621900800000, 4.595178649784963],
      [1621987200000, 4.459295941400744],
      [1622073600000, 4.528177410746674],
      [1622160000000, 3.4050810701698433],
      [1622246400000, 2.79443779455655],
      [1622332800000, 2.8095642673272807],
      [1622419200000, 2.898197913567232],
      [1622505600000, 3.4473762071399197],
      [1622592000000, 2.8369405759876],
      [1622678400000, 3.221225629794265],
      [1622764800000, 3.327377191884098],
      [1622851200000, 2.3964978453171035],
      [1622937600000, 2.572799296472257],
      [1623024000000, 2.729908942782827],
      [1623110400000, 2.4809146797388637],
      [1623196800000, 2.3437213192749704],
      [1623283200000, 2.3725857136384376],
      [1623369600000, 2.207356886831532],
      [1623456000000, 1.9617035726080152],
      [1623542400000, 1.9310061785403039],
      [1623628800000, 2.02714351644471],
      [1623715200000, 2.3210390101866185],
      [1623801600000, 2.022612704718052],
      [1623888000000, 2.052393458128319],
      [1623974400000, 2.2163497748465617],
      [1624060800000, 2.138193914446933],
      [1624147200000, 2.0781721947293947],
      [1624233600000, 2.3467834561593395],
      [1624320000000, 1.7938070931092067],
      [1624406400000, 1.797341012526539],
      [1624492800000, 1.6226514869039828],
      [1624579200000, 1.6931061344302392],
      [1624665600000, 1.5148298413309143],
      [1624752000000, 1.4132699364370855],
      [1624838400000, 1.675091478970268],
      [1624924800000, 1.9139224583713317],
      [1625011200000, 1.7830082661254767],
      [1625097600000, 1.939923910406401],
      [1625184000000, 1.8639054224047844],
      [1625270400000, 1.6619712904248467],
      [1625356800000, 1.8937595887509897],
      [1625443200000, 1.9570390239355329],
      [1625529600000, 1.8795345295504327],
      [1625616000000, 1.7003681963011503],
      [1625702400000, 1.6044888977922127],
      [1625788800000, 1.4989237046242232],
      [1625875200000, 1.4055538664826759],
      [1625961600000, 1.4868003313129121],
      [1626048000000, 1.563611146234318],
      [1626134400000, 1.4696923927457388],
      [1626220800000, 1.0941478338326112],
      [1626307200000, 1.1559037335775373],
      [1626393600000, 1.1485499068819116],
      [1626480000000, 1.2396372228409613],
      [1626566400000, 1.1776671793103677],
      [1626652800000, 1.19409056813221],
      [1626739200000, 1.1845116444807036],
      [1626825600000, 1.0033471236661078],
      [1626912000000, 1.3338607702418805],
      [1626998400000, 1.3191757876923496],
      [1627084800000, 1.2730272314488165],
      [1627171200000, 1.5058638046507136],
      [1627257600000, 1.6145106126182611],
      [1627344000000, 2.4176431757545607],
      [1627430400000, 3.5389302076505054],
      [1627516800000, 3.000408144040369],
      [1627603200000, 2.811468897405425],
      [1627689600000, 3.0036085320355492],
      [1627776000000, 3.0852396596652785],
      [1627862400000, 6.868346152692258],
      [1627948800000, 4.781194433173785],
      [1628035200000, 4.676192666889766],
      [1628121600000, 4.931240625053262],
      [1628208000000, 4.462306836466602],
      [1628294400000, 5.1414116648418515],
      [1628380800000, 7.174259512045743],
      [1628467200000, 6.990748742836639],
      [1628553600000, 7.016196030475164],
      [1628640000000, 6.676843270136797],
      [1628726400000, 7.689071181952055],
      [1628812800000, 7.458384192118216],
      [1628899200000, 7.900897728114394],
      [1628985600000, 7.452411143159122],
      [1629072000000, 6.524837583082317],
      [1629158400000, 5.454879284753043],
      [1629244800000, 5.003544106377777],
      [1629331200000, 4.718515830640522],
      [1629417600000, 4.759483092456256],
      [1629504000000, 6.3968402515172675],
      [1629590400000, 4.459532810435153],
      [1629676800000, 4.87042537143112],
      [1629763200000, 4.652421916546864],
      [1629849600000, 4.146286783602861],
      [1629936000000, 4.075248719314116],
      [1630022400000, 3.6595236985572432],
      [1630108800000, 3.6190872582197096],
      [1630195200000, 3.6603333693313442],
      [1630281600000, 2.8903427332805927],
      [1630368000000, 4.601271594576596],
      [1630454400000, 5.908521092290751],
      [1630540800000, 5.6315196887502745],
      [1630627200000, 5.135376020870287],
      [1630713600000, 4.665632556060174],
      [1630800000000, 4.771530444518417],
      [1630886400000, 5.1763368021307326],
      [1630972800000, 4.520213394452242],
      [1631059200000, 3.5676314084651906],
      [1631145600000, 3.5785351228125517],
      [1631232000000, 3.4256274850003123],
      [1631318400000, 3.440408387474895],
      [1631404800000, 3.3749624794490343],
      [1631491200000, 3.4513188537318915],
      [1631577600000, 3.301356383640362],
      [1631664000000, 3.5130422532040786],
      [1631750400000, 3.832468413724175],
      [1631836800000, 4.029374663764408],
      [1631923200000, 3.870562816390947],
      [1632009600000, 3.47652535499735],
      [1632096000000, 3.359461455512962],
      [1632182400000, 2.861562222513817],
      [1632268800000, 2.665712544435222],
      [1632355200000, 2.4837483336850625],
      [1632441600000, 2.887716548194748],
      [1632528000000, 2.218596505982999],
      [1632614400000, 2.307973937891797],
      [1632700800000, 2.3360113440687367],
      [1632787200000, 2.375353522542527],
      [1632873600000, 1.9410946940162204],
      [1632960000000, 2.0223189312155156],
      [1633046400000, 2.05200336966939],
      [1633132800000, 2.4098329322833654],
      [1633219200000, 2.5259094637366557],
      [1633305600000, 2.103153455104843],
      [1633392000000, 1.7145076633370104],
      [1633478400000, 1.8227197116329217],
      [1633564800000, 1.7835876317409027],
      [1633651200000, 1.9275829038304093],
      [1633737600000, 2.0214330296518783],
      [1633824000000, 1.902057490253356],
      [1633910400000, 1.8149562061062878],
      [1633996800000, 1.9651579804687103],
      [1634083200000, 1.8066922041708313],
      [1634169600000, 1.8612320269351144],
      [1634256000000, 1.845863261986658],
      [1634342400000, 1.9863524792079017],
      [1634428800000, 2.00689097318724],
      [1634515200000, 2.008486277996383],
      [1634601600000, 1.9830421250256423],
      [1634688000000, 2.0905184240417434],
      [1634774400000, 2.1567300017044477],
      [1634860800000, 2.0657281307950703],
      [1634947200000, 2.0732456505621903],
      [1635033600000, 2.1397559915683804],
      [1635120000000, 2.103964644713669],
      [1635206400000, 2.2451324863982314],
      [1635292800000, 2.2807170107767054],
      [1635379200000, 2.1137518336053494],
      [1635465600000, 2.1547357362317285],
      [1635552000000, 2.175026160662862],
      [1635638400000, 2.109645329624835],
      [1635724800000, 2.0541738350515844],
      [1635811200000, 1.9578744463009115],
      [1635897600000, 2.232510284275615],
      [1635984000000, 2.3028039648644048],
      [1636070400000, 2.2681296507252506],
      [1636156800000, 2.13467186833789],
      [1636243200000, 2.245760430938784],
      [1636329600000, 2.312397340241315],
      [1636416000000, 2.4871836772301044],
      [1636502400000, 2.3578797844619523],
      [1636588800000, 2.1358100643068543],
      [1636675200000, 2.2269505953738813],
      [1636761600000, 2.2890614466390296],
      [1636848000000, 2.272903728839062],
      [1636934400000, 2.2740624337077495],
      [1637020800000, 2.1629348818702554],
      [1637107200000, 1.9219056675672388],
      [1637193600000, 1.8804349100998843],
      [1637280000000, 1.5719741479444909],
      [1637366400000, 1.7902068662419983],
      [1637452800000, 1.7722390444001335],
      [1637539200000, 1.7040100790654864],
      [1637625600000, 1.5865753632334008],
      [1637712000000, 1.6525186381485737],
      [1637798400000, 1.778383721641412],
      [1637884800000, 1.7632143017350947],
      [1637971200000, 1.51196688129422],
      [1638057600000, 1.4777313433280765],
      [1638144000000, 1.5454552113414053],
      [1638230400000, 1.557640407777696],
      [1638316800000, 1.4289524967863714],
      [1638403200000, 1.4433728788623075],
      [1638489600000, 1.51367517122216],
      [1638576000000, 1.4323647421930328],
      [1638662400000, 1.3213233705461194],
      [1638748800000, 1.2229262071082863],
      [1638835200000, 1.2592232844340967],
      [1638921600000, 1.2454616170503952],
      [1639008000000, 1.2003468181449621],
      [1639094400000, 1.0999199456702236],
      [1639180800000, 1.0303568598286024],
      [1639267200000, 1.0158638700250318],
      [1639353600000, 1.0795629280662862],
      [1639440000000, 0.9414600635310583],
      [1639526400000, 1.0021263826292321],
      [1639612800000, 1.121112100594004],
      [1639699200000, 1.1119378512421907],
      [1639785600000, 1.0464186055459566],
      [1639872000000, 1.0596197866271388],
      [1639958400000, 1.0469216635551415],
      [1640044800000, 1.0593276410300527],
      [1640131200000, 1.0394407094762776],
      [1640217600000, 1.0840208480522289],
      [1640304000000, 1.1703741450885228],
      [1640390400000, 1.1914982645888164],
      [1640476800000, 1.1987635841596813],
      [1640563200000, 1.259992776506436],
      [1640649600000, 1.2143370120733876],
      [1640736000000, 1.2019481086661064],
      [1640822400000, 1.1393155791920677],
      [1640908800000, 1.188506045442201],
      [1640995200000, 1.1858679438336133],
      [1641081600000, 1.222897533759412],
      [1641168000000, 1.2848933404191045],
      [1641254400000, 1.3351131123824374],
      [1641340800000, 1.3384684965659173],
      [1641427200000, 1.2588873148616488],
      [1641513600000, 1.2267625069791412],
      [1641600000000, 1.083784247770581],
      [1641686400000, 1.061909355292138],
      [1641772800000, 1.1237675462804078],
      [1641859200000, 0.9166611992417794],
      [1641945600000, 1.0426418276676914],
      [1642032000000, 1.075939865560002],
      [1642118400000, 1.1065655161114496],
      [1642204800000, 1.1436183228157084],
      [1642291200000, 1.1845022469072097],
      [1642377600000, 1.1873584939788018],
      [1642464000000, 1.0016546659013674],
      [1642550400000, 1.1178104787229568],
      [1642636800000, 1.0475031884791464],
      [1642723200000, 1.0426206462510976],
      [1642809600000, 0.8573457629747226],
      [1642896000000, 0.7035755845658425],
      [1642982400000, 0.7257460730767211],
      [1643068800000, 0.6999481764119394],
      [1643155200000, 0.7638614389363275],
      [1643241600000, 0.7452336882534282],
      [1643328000000, 0.6696194750785991],
      [1643414400000, 0.6664258563117536],
      [1643500800000, 0.6649061699893027],
      [1643587200000, 0.6448561855083665],
      [1643673600000, 0.630038538984336],
      [1643760000000, 0.6304642408396881],
      [1643846400000, 0.5579079725799877],
      [1643932800000, 0.5319235115774181],
      [1644019200000, 0.5645668245315086],
      [1644095906392, 0.5967539446217976],
    ],
    total_volumes: [
      [1614124800000, 2153756.6881702603],
      [1614211200000, 2153756.6881702603],
      [1614297600000, 584574.515382407],
      [1614384000000, 163420.17919639248],
      [1614470400000, 182650.28996929064],
      [1614556800000, 172315.4076918309],
      [1614643200000, 762731.2935402018],
      [1614729600000, 465914.67412486416],
      [1614816000000, 194458.2246448268],
      [1614902400000, 153748.99814682087],
      [1614988800000, 5911990.668513813],
      [1615075200000, 2787130.1228935975],
      [1615161600000, 884087.5171704096],
      [1615248000000, 967364.3823376156],
      [1615334400000, 453601.0044098792],
      [1615420800000, 494441.60348943394],
      [1615507200000, 634328.6882420684],
      [1615593600000, 611740.1074057921],
      [1615680000000, 576755.2268718199],
      [1615766400000, 577141.0322780074],
      [1615852800000, 237192.60304109615],
      [1615939200000, 174467.9212871194],
      [1616025600000, 350107.1264913202],
      [1616112000000, 649291.4847608696],
      [1616198400000, 424894.7061878476],
      [1616284800000, 388953.8738587342],
      [1616371200000, 198025.3062371746],
      [1616457600000, 203648.60126739592],
      [1616544000000, 153908.48834529275],
      [1616630400000, 211473.0364084719],
      [1616716800000, 141467.7015286546],
      [1616803200000, 991369.2444435833],
      [1616889600000, 1347107.8646654407],
      [1616976000000, 1216562.2130774043],
      [1617062400000, 351363.4287349491],
      [1617148800000, 660166.6264873605],
      [1617235200000, 442449.56525157345],
      [1617321600000, 738875.2826613501],
      [1617408000000, 995116.7467683431],
      [1617494400000, 563674.0226591096],
      [1617580800000, 215365.50593890907],
      [1617667200000, 673482.8238524572],
      [1617753600000, 507872.0652555227],
      [1617840000000, 1312142.03232461],
      [1617926400000, 375344.76986984373],
      [1618012800000, 529121.2538020583],
      [1618099200000, 403558.10958131886],
      [1618185600000, 238049.44241703273],
      [1618272000000, 178073.3190928749],
      [1618358400000, 180677.81612650355],
      [1618444800000, 95264.90499480348],
      [1618531200000, 88925.72459762571],
      [1618617600000, 81521.33973734829],
      [1618704000000, 26270.276678336493],
      [1618790400000, 198330.68877232645],
      [1618876800000, 107643.01333666385],
      [1618963200000, 266287.0348240004],
      [1619049600000, 67014.0033713014],
      [1619136000000, 113105.52586247948],
      [1619222400000, 75142.63433777214],
      [1619308800000, 86932.21580636252],
      [1619395200000, 53126.82687943451],
      [1619481600000, 173569.3527010863],
      [1619568000000, 134957.33105865098],
      [1619654400000, 97273.54553490579],
      [1619740800000, 130384.97711909698],
      [1619827200000, 106507.34333764025],
      [1619913600000, 51593.20269970731],
      [1620000000000, 74059.64376913672],
      [1620086400000, 1677125.714780978],
      [1620172800000, 477615.7431191134],
      [1620259200000, 129908.21947969722],
      [1620345600000, 52850.245030799866],
      [1620432000000, 70910.3537322986],
      [1620518400000, 33160.4006655909],
      [1620604800000, 36489.42888376068],
      [1620691200000, 272760.2307217688],
      [1620777600000, 642317.6716299525],
      [1620864000000, 406179.03580018395],
      [1620950400000, 403531.72117630433],
      [1621036800000, 388362.9762561981],
      [1621123200000, 446181.58376376843],
      [1621209600000, 67486.55686519052],
      [1621296000000, 202042.72208160796],
      [1621382400000, 258737.2989060894],
      [1621468800000, 216553.84594192295],
      [1621555200000, 186396.85141992156],
      [1621641600000, 165047.5913798901],
      [1621728000000, 89946.0790706777],
      [1621814400000, 9708.336494004248],
      [1621900800000, 251039.0063007469],
      [1621987200000, 193882.7232207953],
      [1622073600000, 163304.03675097763],
      [1622160000000, 34950.779965482725],
      [1622246400000, 12084.32972552492],
      [1622332800000, 22631.17355376332],
      [1622419200000, 131508.21248485838],
      [1622505600000, 132541.90138593843],
      [1622592000000, 142741.20707852906],
      [1622678400000, 147855.26517427433],
      [1622764800000, 138663.59495927344],
      [1622851200000, 182822.7588297158],
      [1622937600000, 119270.99367748726],
      [1623024000000, 122579.45121821444],
      [1623110400000, 88874.58695127281],
      [1623196800000, 115453.27826053053],
      [1623283200000, 50533.69378820756],
      [1623369600000, 63146.984320961266],
      [1623456000000, 80115.86640996086],
      [1623542400000, 85188.85230173497],
      [1623628800000, 80816.45631369595],
      [1623715200000, 86033.47210421074],
      [1623801600000, 83022.39598032553],
      [1623888000000, 87087.6206137326],
      [1623974400000, 104116.08382230405],
      [1624060800000, 102407.39880978136],
      [1624147200000, 82716.63262754932],
      [1624233600000, 87334.71401232468],
      [1624320000000, 77979.17171953806],
      [1624406400000, 72232.05847201501],
      [1624492800000, 78813.7686497541],
      [1624579200000, 70672.71353895683],
      [1624665600000, 57681.84672567221],
      [1624752000000, 52520.78356031844],
      [1624838400000, 75321.17625775732],
      [1624924800000, 77300.30161267488],
      [1625011200000, 68867.4670261125],
      [1625097600000, 81387.06479880457],
      [1625184000000, 87034.91847474796],
      [1625270400000, 67145.82204850166],
      [1625356800000, 83600.2262392058],
      [1625443200000, 94207.58267410425],
      [1625529600000, 80811.88467525695],
      [1625616000000, 76381.02920033844],
      [1625702400000, 101427.66308231589],
      [1625788800000, 176553.25183466516],
      [1625875200000, 188930.7218747674],
      [1625961600000, 256197.10274115886],
      [1626048000000, 275544.98354333383],
      [1626134400000, 210323.60264436563],
      [1626220800000, 212505.6219101731],
      [1626307200000, 237075.2223081408],
      [1626393600000, 250741.18004452766],
      [1626480000000, 239670.73269118773],
      [1626566400000, 222104.668827233],
      [1626652800000, 222552.00995535328],
      [1626739200000, 216280.5042543829],
      [1626825600000, 201187.44225989492],
      [1626912000000, 250528.31084863338],
      [1626998400000, 208588.09802527376],
      [1627084800000, 184960.8039367788],
      [1627171200000, 272203.12342578615],
      [1627257600000, 250781.1605368986],
      [1627344000000, 385178.5935665589],
      [1627430400000, 447539.2123158679],
      [1627516800000, 696948.4205003491],
      [1627603200000, 1647872.9613501097],
      [1627689600000, 1530702.6436181841],
      [1627776000000, 1744998.0733643714],
      [1627862400000, 3237359.2972694747],
      [1627948800000, 1533231.3800721266],
      [1628035200000, 1819070.4915434867],
      [1628121600000, 679033.3381881099],
      [1628208000000, 1569058.8702978399],
      [1628294400000, 2100243.196326007],
      [1628380800000, 2504104.015980381],
      [1628467200000, 2551262.5988707696],
      [1628553600000, 1407974.5319953964],
      [1628640000000, 1013195.1533279998],
      [1628726400000, 1191178.9511767786],
      [1628812800000, 359876.5858176899],
      [1628899200000, 1057086.7957285917],
      [1628985600000, 883587.922266002],
      [1629072000000, 712688.3652377361],
      [1629158400000, 825455.0692687334],
      [1629244800000, 437951.67897391197],
      [1629331200000, 763868.6628960571],
      [1629417600000, 960092.0129264266],
      [1629504000000, 1110000.239570812],
      [1629590400000, 795225.6597668414],
      [1629676800000, 1097422.5778384062],
      [1629763200000, 974951.3559482803],
      [1629849600000, 868368.5777198084],
      [1629936000000, 967809.7895056291],
      [1630022400000, 858598.2346203125],
      [1630108800000, 962113.310382523],
      [1630195200000, 969391.6182572376],
      [1630281600000, 35859.354731023705],
      [1630368000000, 200603.74183391704],
      [1630454400000, 258256.90557765352],
      [1630540800000, 48529.83991487203],
      [1630627200000, 33524.01166640623],
      [1630713600000, 32818.160865543876],
      [1630800000000, 8554.032222107777],
      [1630886400000, 109372.11420983948],
      [1630972800000, 23663.96077937771],
      [1631059200000, 29124.25783093556],
      [1631145600000, 4350.844561611118],
      [1631232000000, 2494.3829000504775],
      [1631318400000, 3805.4721093170874],
      [1631404800000, 8992.503035635345],
      [1631491200000, 3071.188163833487],
      [1631577600000, 21797.187438305205],
      [1631664000000, 9830.121351980508],
      [1631750400000, 7647.349351131534],
      [1631836800000, 45201.874917233945],
      [1631923200000, 2911.2532459708377],
      [1632009600000, 18328.510562533913],
      [1632096000000, 12033.067710586403],
      [1632182400000, 55915.76099283529],
      [1632268800000, 9795.840990275994],
      [1632355200000, 62706.1333622189],
      [1632441600000, 29408.10697395931],
      [1632528000000, 26196.88380332466],
      [1632614400000, 6128.0908470538025],
      [1632700800000, 8909.729331837614],
      [1632787200000, 22026.225285918037],
      [1632873600000, 15256.292970101376],
      [1632960000000, 1869.5230002284352],
      [1633046400000, 3588.4195831093793],
      [1633132800000, 28152.682948576617],
      [1633219200000, 75.57655970792733],
      [1633305600000, 71457.46001524614],
      [1633392000000, 334644.8175192261],
      [1633478400000, 14193.809741537489],
      [1633564800000, 61113.53020155008],
      [1633651200000, 17866.98426110813],
      [1633737600000, 10761.413508694053],
      [1633824000000, 12819.652563610001],
      [1633910400000, 10002.446004971664],
      [1633996800000, 9994.686926956845],
      [1634083200000, 7791.0737860587815],
      [1634169600000, 34866.48572846277],
      [1634256000000, 26840.019643139654],
      [1634342400000, 23391.835999949264],
      [1634428800000, 3073.4835853475497],
      [1634515200000, 6792.757062316521],
      [1634601600000, 5931.808382258944],
      [1634688000000, 9576.613888541873],
      [1634774400000, 3348.821014817341],
      [1634860800000, 7504.433018965689],
      [1634947200000, 8185.520894014127],
      [1635033600000, 7146.322517596677],
      [1635120000000, 9713.42764225642],
      [1635206400000, 22065.547330643196],
      [1635292800000, 73315.26620291553],
      [1635379200000, 47088.53573663847],
      [1635465600000, 35389.29723735558],
      [1635552000000, 30996.90816622576],
      [1635638400000, 41874.7696972527],
      [1635724800000, 44078.093597591476],
      [1635811200000, 13604.296920846384],
      [1635897600000, 48745.8453855606],
      [1635984000000, 11195.21324669849],
      [1636070400000, 12814.910965313116],
      [1636156800000, 73244.13923730394],
      [1636243200000, 18224.54916274124],
      [1636329600000, 31886.606654011055],
      [1636416000000, 20672.711337991048],
      [1636502400000, 19041.489883209142],
      [1636588800000, 25459.1590597474],
      [1636675200000, 11013.38340687532],
      [1636761600000, 22660.4311514567],
      [1636848000000, 6460.0436378005725],
      [1636934400000, 3154.410396788176],
      [1637020800000, 1650.1245456797994],
      [1637107200000, 11814.168036892506],
      [1637193600000, 14972.87159290378],
      [1637280000000, 19988.195882803226],
      [1637366400000, 89771.47902370857],
      [1637452800000, 46858.22593299058],
      [1637539200000, 3958.703316787557],
      [1637625600000, 4652.940638002073],
      [1637712000000, 60881.9547224066],
      [1637798400000, 2946.597080805901],
      [1637884800000, 28385.476488417444],
      [1637971200000, 12643.055117516695],
      [1638057600000, 4775.935174135063],
      [1638144000000, 10173.688022717284],
      [1638230400000, 4979.733566423644],
      [1638316800000, 25180.021653522734],
      [1638403200000, 28676.478060010442],
      [1638489600000, 8505.138794983173],
      [1638576000000, 668.5783240368867],
      [1638662400000, 5770.844484558501],
      [1638748800000, 13188.846269564347],
      [1638835200000, 42248.05877765306],
      [1638921600000, 18070.65259423088],
      [1639008000000, 17046.670459266035],
      [1639094400000, 6462.76007201495],
      [1639180800000, 22380.513898011348],
      [1639267200000, 3786.875755599286],
      [1639353600000, 8250.970900109141],
      [1639440000000, 871.1464987905913],
      [1639526400000, 13959.044972590753],
      [1639612800000, 29189.050942051974],
      [1639699200000, 31908.70944116312],
      [1639785600000, 13458.028169431393],
      [1639872000000, 9659.87718414009],
      [1639958400000, 188.9016454915352],
      [1640044800000, 730.7488176090772],
      [1640131200000, 15448.439247534967],
      [1640217600000, 3439.0583553995757],
      [1640304000000, 6123.943615499153],
      [1640390400000, 17402.12432765662],
      [1640476800000, 5512.015941645354],
      [1640563200000, 10523.787275166955],
      [1640649600000, 10032.42986225422],
      [1640736000000, 1366.040951623042],
      [1640822400000, 245.9774655316337],
      [1640908800000, 2826.8858821599465],
      [1640995200000, 2299.5861883461052],
      [1641081600000, 20448.749979772136],
      [1641168000000, 19800.514390779445],
      [1641254400000, 22254.547536699378],
      [1641340800000, 14875.238162976433],
      [1641427200000, 32955.85973705141],
      [1641513600000, 18577.05157230731],
      [1641600000000, 10102.761897934817],
      [1641686400000, 17551.7898008199],
      [1641772800000, 2231.51448416175],
      [1641859200000, 67150.3720631988],
      [1641945600000, 13308.46332432119],
      [1642032000000, 21411.087696409453],
      [1642118400000, 16721.13315508233],
      [1642204800000, 7486.9682926191945],
      [1642291200000, 5453.934403563737],
      [1642377600000, 40402.04912457203],
      [1642464000000, 17634.648779875683],
      [1642550400000, 26840.32202065187],
      [1642636800000, 15468.853145890522],
      [1642723200000, 10849.26942247775],
      [1642809600000, 12650.339369287],
      [1642896000000, 20880.150537085705],
      [1642982400000, 14037.521431989117],
      [1643068800000, 4817.6206322920025],
      [1643155200000, 56292.946358697205],
      [1643241600000, 17730.601039553832],
      [1643328000000, 21947.31019841324],
      [1643414400000, 10114.521667324734],
      [1643500800000, 11470.82358505048],
      [1643587200000, 7234.339717833442],
      [1643673600000, 12511.160581421418],
      [1643760000000, 7779.624470716245],
      [1643846400000, 10565.972230671208],
      [1643932800000, 6831.3971777855695],
      [1644019200000, 3055.341765286803],
      [1644095906392, 5522.389554940134],
    ],
  };

  const dateData = datePriceVolume.stats.map((e) =>
    dayjs(e[0]).format("YYYY-MM-DD")
  );
  const priceData = datePriceVolume.stats.map((e) => e[1]);
  const volumeData = datePriceVolume.total_volumes.map((e) => e[1]);

  const layout = {
    autosize: true,
    margin: {
      t: 50,
      b: 50,
      r: 50,
      l: 50,
    },
    yaxis: { domain: [0.35, 1] },
    xaxis: { anchor: "y3" },
    yaxis2: { domain: [0.2, 0.35] },
    yaxis3: { domain: [0, 0.2] },
    grid: {
      rows: 3,
      columns: 1,
    },
    paper_bgcolor: "#181b22",
    plot_bgcolor: "#121419",
    autosize: true,
    legend: {
      bgcolor: "black",
      orientation: "h",
    },
    xaxisTitle: "Date",
    hovermode: "x unified",
    showLegend: true,
  };

  const data = [
    {
      type: "scatter",
      name: "Price, $",
      x: dateData,
      y: priceData,
      mode: "lines&markers",
      marker: { color: "#2ecd2d" },
    },
    {
      type: "bar",
      name: "Volume, $",
      x: dateData,
      y: volumeData,
      xaxis: "x",
      yaxis: "y2",
      marker: { color: "#c21d51" },
    },
  ];

  if (!isLoading) {
    data[2] = {
      type: "bar",
      name: "Github Activity",
      x: Object.keys(commitsData),
      y: Object.values(commitsData),
      xaxis: "x",
      yaxis: "y3",
      marker: { color: "#31324c" },
    };
  }

  return (
    <Box
      display={"flex"}
      m={2}
      justifyContent={"center"}
      alignItems={"center"}
      style={{ width: "auto" }}
    >
      <Plot
        data={data}
        useResizeHandler={true}
        style={{ width: "100%", height: "100%", maxWidth: "900px" }}
        layout={layout}
      />
    </Box>
  );
};

export default Graph;
